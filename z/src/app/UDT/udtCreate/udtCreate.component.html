<!-- Export Dialog: Modal, Controlled by visibility flag -->
<udt-ExportDialog
[style.display] = "(this.visible.exportDialog)? 'block': 'none'"
[objectName]= "this.editingObj.u.symbolicName"
(evCancelled)="this.visible.exportDialog = false"
(evExportTrigger)="this.exportHandler($event)"
>

</udt-ExportDialog>

    <!-- sticky/fiex on scroll -->
    <div
    class="cl-TopBarContainer"
    [class.posFixed-Top] = "_hostListner.stickyOnWindowScroll(31) && (!this.visible.exportDialog)"
    [class.posRelative] = "!_hostListner.stickyOnWindowScroll(33)">

    <div class="row"> <!--Top row -->
        <!-- router to list page -->
        <input
        type="submit"
        class = "cl-trigger-round cl-trigger-round-blue"
        routerLink = "/libMngr/udt"
        routerLinkActive="active"
        value = "&#xe5c4;">

        <div class = "seperator"></div> <!--Separator-->

        <!-- Add new button -->
        <input
        type="submit"
        class = "cl-trigger-round cl-trigger-round-add"
        (click)="postReq_CreateUDT()"
        value = "&#xe02e;"
        [disabled]="(!formGroup.valid) || (this.opEdit)">

        <div class = "seperator"></div> <!--Separator-->

        <!-- save / Update / Apply modification button
          This will stay disabled when
           + From group is pristine (touched = no dirty, but no value change),
           + form group is not valid,
           + This is not an Edit (modifying) operation
        -->
        <libForm-ActionTrigger
        (execOnTrigger)= "updateUDT()"
        [actionIcon] = "'&#xe161;'"
        [actionText]= "'UPDATE'"
        [disableControl]="(!formGroup.valid) || (!this.opEdit) || (!formGroup.dirty)"
        [css]="['rgb(0, 156, 96)','none','l']"></libForm-ActionTrigger>

        <!-- Trigger element: Open the delete confirmation dialog -->

        <libForm-ActionTrigger
        (execOnTrigger)= "deleteUDT()"
        [actionIcon] = "'&#xe92b;'"
        [actionText]= "'DELETE'"
        [disableControl]="(!this.opEdit)"
        [css]="['rgb(247, 72, 72)','none','l']"></libForm-ActionTrigger>

        <libForm-ActionTrigger
        (execOnTrigger)= "this.visible.exportDialog = !this.visible.exportDialog"
        [actionIcon] = "'&#xe2c0;'"
        [actionText]= "'EXPORT'"
        [disableControl]="(!formGroup.valid) || (!this.opEdit)|| (formGroup.dirty) || (this.editingObj.u.vars.length <= 0)"
        [css]="['rgba(0,120,220,1)','none','l']"></libForm-ActionTrigger>

    </div>
  </div>
<!-- Form starts here -->
  <form
  [formGroup]="formGroup.get('plcTag')"
  class="cl-FormContainer form-group"
  [class.cl-IsF] = "formGroup.get('plcTag.isF').value"
  novalidate>
  <h1>{{formHeaderText}}</h1>

        <div class="row"> <!--row 1-->
              <div class = "leftcolumn clWidth33Perc">
                <libForm-InputText
                [labelText] = '"Name"'
                [formControl] = "formGroup.get('plcTag.name')">
              </libForm-InputText>
               </div>
              <div class = "rightcolumn clWidth66Perc">
                <libForm-InputText
                [labelText] = '"Comment"'
                [formControl] = "formGroup.get('plcTag.comment.en')">
              </libForm-InputText>
              </div>
          </div> <!--row 1 END -->

          <div class="row"> <!--row 2 BEGIN -->
            <div class = "leftcolumn clWidth50Perc">
                <div class = "leftcolumn clWidth25Perc">
                    <label for="isF"> Fail-Safe:</label>
                </div>
                <div class = "rightcolumn clWidth75Perc">
                      <input
                      type="checkbox"
                      name = "isF"
                      class="form-control"
                      formControlName= "isF">
                </div>
            </div>
            <div class = "rightcolumn clWidth50Perc">
                <libForm-InputText
                [labelText] = '"Data-Type"'
                [formControl] = "formGroup.get('plcTag.datatype')">
              </libForm-InputText>
            </div>
          </div> <!--row 2 END -->


          <div class="row"> <!--row 3 BEGIN -->
          </div><!--row 3 END -->

          <div class="row"> <!--row 4 BEGIN -->
            <div class = "leftcolumn clWidth15Perc">
            </div>
            <div class = "rightcolumn clWidth75Perc">

            </div>
          </div><!--row 4 END -->


  <!-- UDT Vars -->
    <div>
        <div class="float-r sub-text">
            <br> Variables: {{this.editingObj.u.vars.length}}
            <br>  Block Size: {{this.bitWeight / 8}} Bytes
        </div>

        <h1>
          STAT_VAR
        </h1>
    </div>
<div class="form-group">
          <div *ngFor="let v of this.editingObj.u.vars; let i = index">
              <udt-var
              [dataTypes]="this.dataTypes"
              [uVarIn]="v"
              [uVarFormGroup]="this.formGroup.controls['vars'].controls[i]"
              (dataTypeChangeTrigger)= "this.onChildrenVarChanged()" >

              </udt-var>
          </div>
</div>

    <div class="row"> <!--row BEGIN -->
      <input
      type="submit"
      class = "cl-trigger-round cl-trigger-round-add mi float-r"
      value = "&#xe03b;"
      (click)= "addNewVar()" >

      <libForm-ActionTrigger
      class = "float-r"
      (execOnTrigger)= "addNewVar()"
      [actionIcon] = "'&#xe03b;'"
      [actionText]= "'ADD VAR'"
      [disableControl]="false"
      [css]="['rgb(126, 163, 3)','none','l']"></libForm-ActionTrigger>

    </div> <!--row END -->

</form> <!-- Form End -->

